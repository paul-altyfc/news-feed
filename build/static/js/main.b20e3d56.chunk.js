(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports={article:"Article_article__JRXUG",p:"Article_p__3KM_3",h2:"Article_h2__lbgmn",commentbtn:"Article_commentbtn__2Mmkz",commentarea:"Article_commentarea__1Qemx"}},12:function(e,t,a){e.exports={navbar:"Nav_navbar__kZSxk",logo:"Nav_logo__3swAY",links:"Nav_links__7jwpt",user:"Nav_user__1bLZk",btn:"Nav_btn__2McFx",logonbutton:"Nav_logonbutton__2Vxu1"}},13:function(e,t,a){e.exports={list:"Topics_list__3J_qd",catheader:"Topics_catheader__3qSeI",topicbtn:"Topics_topicbtn__d4P6O",container:"Topics_container__3W1Dp",topics:"Topics_topics__1d6Xh"}},14:function(e,t,a){e.exports={form:"CommentAdder_form__sOjqF",commenttext:"CommentAdder_commenttext__25ZKf",inputbox:"CommentAdder_inputbox__2EwQc",commentbtn:"CommentAdder_commentbtn__2PsI-"}},15:function(e,t,a){e.exports={main:"Error-page_main__M9Hwh",textpos:"Error-page_textpos__2wG7I"}},16:function(e,t,a){e.exports={label:"Sorter_label__1dN6y",sortbutton:"Sorter_sortbutton__29XTM"}},17:function(e,t,a){e.exports={voter:"Voter_voter__1p1vD",votes:"Voter_votes__2LBWX"}},32:function(e,t,a){e.exports={orderbutton:"Orderer_orderbutton__wRxr6"}},35:function(e,t,a){e.exports=a(66)},40:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),o=a.n(c),s=(a(40),a(1)),l=a(2),i=a(4),m=a(3),u=a(5),p=a(7),d=a(15),h=a.n(d),_=function(e){var t=e.text,a=e.err;return r.a.createElement("div",{className:h.a.main},r.a.createElement("h1",{className:h.a.textpos},t||"Something went wrong..."),a?r.a.createElement("p",{className:h.a.textmess},a.message,". ",a.response.data.msg):null)},f=function(e){return r.a.createElement(p.a,Object.assign({},e,{className:"".concat(e.className," nav-link"),getProps:function(e){return{style:{borderBottom:e.isCurrent?"0px solid white":"0"}}}}),e.children)},b=a(12),v=a.n(b),E=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.loggedInUser;return r.a.createElement("nav",{className:v.a.navbar},r.a.createElement(f,{className:v.a.links,to:"/"},r.a.createElement("button",{className:v.a.btn},r.a.createElement("i",{className:"fa fa-home"})," Articles")),r.a.createElement("div",{className:v.a.user},"Logged in user:",r.a.createElement("button",{className:v.a.logonbutton},e,r.a.createElement("i",{className:"fa fa-user"}))))}}]),t}(n.Component),g=a(31),N=a.n(g).a.create({baseURL:"https://article-reviews.herokuapp.com/api"}),y=function(e,t,a,n){return N.get("/articles",{params:{topic:e,author:t,sort_by:a,order:n,limit:1e3}}).then(function(e){return e.data})},C=function(e){return N.get("/articles/".concat(e),{}).then(function(e){return e.data})},O=function(e){return N.get("/articles/".concat(e,"/comments")).then(function(e){return e.data})},j=function(e,t){return N.post("articles/".concat(e,"/comments"),t).then(function(e){return e.data.comment})},A=function(e){return N.delete("comments/".concat(e))},k=function(e,t,a){return N.patch("/".concat(e,"/").concat(t),{inc_votes:a})},S=function(){return N.get("/topics").then(function(e){return e.data})},x=function(e){var t=e.text;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"spinner"}),r.a.createElement("p",null,t||"Loading..."))},w=a(8),I=a.n(w),L=a(17),U=a.n(L),T=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={voteModifier:0,err:null},a.vote=function(e){k(a.props.type,a.props.id,e).catch(function(e){a.setState({err:e})}),a.setState(function(t){return{voteModifier:t.voteModifier+e}})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.voteModifier,n=t.err;return n?r.a.createElement(_,{err:n}):r.a.createElement("div",null,r.a.createElement("p",{className:U.a.voter},r.a.createElement("button",{onClick:function(){return e.vote(1)},disabled:1===a},r.a.createElement("span",{role:"img","aria-label":"thumbs up",alt:"thumbs up"},"\ud83d\udc4d")),r.a.createElement("label",{className:U.a.votes},"Votes:",this.props.votes+a),r.a.createElement("button",{onClick:function(){return e.vote(-1)},disabled:-1===a},r.a.createElement("span",{role:"img","aria-label":"thumbs down",alt:"thumbs up"},"\ud83d\udc4e"))))}}]),t}(n.Component),D=a(16),M=a.n(D),F=function(e){var t=e.setSort;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:M.a.label},"Sort:"),r.a.createElement("select",{className:M.a.sortbutton,onChange:t},r.a.createElement("option",{className:M.a.droptext,value:"created_at"},"Date"),r.a.createElement("option",{value:"title"},"Title"),r.a.createElement("option",{value:"topic"},"Category"),r.a.createElement("option",{value:"author"},"Author"),r.a.createElement("option",{value:"votes"},"Votes"),r.a.createElement("option",{value:"comment_count"},"Comments")))},q=a(32),P=a.n(q),V=function(e){var t=e.setOrder;return r.a.createElement("select",{onChange:t,className:P.a.orderbutton},r.a.createElement("option",{value:"desc"},"Desc"),r.a.createElement("option",{value:"asc"},"Asc"))},X=function(e){return new Date(e).toLocaleString()},G=a(13),B=a.n(G),J=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={topics:[],isLoading:!0,err:null,topic:""},a.handleClick=function(e){return function(){a.props.onPress(e)}},a.fetchTopics=function(){S(a.props.slug).then(function(e){var t=e.topics;a.setState({topics:t,isLoading:!1})}).catch(function(e){a.setState({err:e})})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.topics,n=t.isLoading,c=t.err;return c?r.a.createElement(_,{err:c}):n?r.a.createElement(x,{text:"Loading topics..."}):r.a.createElement("div",{className:B.a.container},r.a.createElement("h4",{className:B.a.catheader},"Categories"),r.a.createElement("ul",{className:B.a.topics},a.map(function(t){return r.a.createElement("li",{className:B.a.list,key:t.slug,id:t.slug},r.a.createElement(p.a,{to:"/topics/".concat(t.slug)},r.a.createElement("button",{onClick:e.handleClick(t.slug),className:B.a.topicbtn},t.slug)))})))}},{key:"componentDidMount",value:function(){this.fetchTopics()}}]),t}(n.Component),R=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={articles:[],isLoading:!0,err:null,sort:"created_at",order:"desc",topic:"All"},a.setOrder=function(e){var t=e.target.value;a.setState({order:t})},a.setSort=function(e){var t=e.target.value;a.setState({sort:t})},a.handleClick=function(e){a.setState({topic:e})},a.fetchArticles=function(){var e=a.props,t=e.topic,n=e.author,r=a.state,c=r.sort,o=r.order;y(t,n,c,o).then(function(e){var t=e.articles;a.setState({articles:t,isLoading:!1})}).catch(function(e){a.setState({err:e})})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.articles,a=e.isLoading,n=e.err;return n?r.a.createElement(_,{err:n}):a?r.a.createElement(x,{text:"Loading articles..."}):r.a.createElement("div",{className:I.a.articles},r.a.createElement("h2",{className:I.a.header},"Articles - ",this.state.topic),r.a.createElement(J,{onPress:this.handleClick,className:I.a.topics}),r.a.createElement("div",{className:I.a.control},r.a.createElement(F,{setSort:this.setSort}),r.a.createElement(V,{setOrder:this.setOrder})),r.a.createElement("ul",{className:I.a.list},t.map(function(e){return r.a.createElement("li",{className:I.a.listitems,key:e.article_id},r.a.createElement(p.a,{className:I.a.link,to:"/articles/".concat(e.article_id)},r.a.createElement("h3",null,e.title)),X(e.created_at),r.a.createElement(p.a,{to:"/topics/".concat(e.topic)},r.a.createElement("p",null,"Category: ",e.topic)),r.a.createElement(p.a,{to:"/authors/".concat(e.author)},r.a.createElement("p",null,"Author: ",e.author)),r.a.createElement("p",null,"Comments: ",e.comment_count),r.a.createElement(T,{type:"articles",id:e.article_id,votes:e.votes}))})))}},{key:"componentDidMount",value:function(){this.fetchArticles()}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=a.topic,r=a.author,c=this.state,o=c.sort,s=c.order,l=e.topic!==n,i=e.author!==r,m=t.sort!==o,u=t.order!==s;(l||i||m||u)&&(this.fetchArticles(),void 0===n&&this.setState({topic:"All"}))}}]),t}(n.Component),Z=a(34),K=a(33),z=a(14),Q=a.n(z),W=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state=t.INITIAL_STATE,a.handleChange=function(e,t){a.setState(Object(K.a)({},t,e))},a.handleSubmit=function(e){e.preventDefault();var t=a.state.body,n=a.props,r=n.article_id,c=n.loggedInUser;j(r,{body:t,username:c}).then(function(e){a.props.addComment(e),a.setState({body:""})}).catch(function(e){a.setState({err:e})})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.err;return t?r.a.createElement(_,{err:t}):r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("span",{className:Q.a.form},r.a.createElement("p",{className:Q.a.commenttext},"Add a new comment: "),r.a.createElement("input",{type:"text",id:"body",className:Q.a.inputbox,required:!0,onChange:function(t){return e.handleChange(t.target.value,"body")}}),r.a.createElement("button",{className:Q.a.commentbtn},"New Comment")))}}]),t}(n.Component);W.INITIAL_STATE={body:"",err:null};var Y=W,H=a(9),$=a.n(H),ee=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={comments:[],isLoading:!0,err:null},a.addComment=function(e){a.setState(function(t){return{comments:[e].concat(Object(Z.a)(t.comments))}})},a.deleteComment=function(e){A(e).then(function(){a.setState(function(t){return{comments:t.comments.filter(function(t){return t.comment_id!==e})}})}).catch(function(e){a.setState({err:e})})},a.fetchComments=function(){O(a.props.article_id).then(function(e){var t=e.comments;a.setState({comments:t,isLoading:!1})}).catch(function(e){a.setState({err:e})})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.comments,n=t.isLoading,c=t.err;return c?r.a.createElement(_,{err:c}):n?r.a.createElement(x,{text:"Loading comments..."}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,{article_id:this.props.article_id,loggedInUser:this.props.loggedInUser,addComment:this.addComment}),r.a.createElement("h4",{className:$.a.h4},"comments"),r.a.createElement("ul",{className:$.a.ul},a.map(function(t){return r.a.createElement("li",{className:$.a.li,key:t.comment_id},r.a.createElement("h5",{className:$.a.h5},t.author),r.a.createElement("p",{className:$.a.p},t.body),e.props.loggedInUser===t.author&&r.a.createElement("p",null,r.a.createElement("button",{className:$.a.deletebtn,onClick:function(){return e.deleteComment(t.comment_id)}},"Delete")),r.a.createElement(T,{type:"comments",id:t.comment_id,votes:t.votes}))})))}},{key:"componentDidMount",value:function(){this.fetchComments()}}]),t}(n.Component),te=a(10),ae=a.n(te),ne=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={article:"",isLoading:!0,err:null,showComments:!1},a.handleClick=function(){a.setState({showComments:!0})},a.fetchArticle=function(){C(a.props.article_id).then(function(e){var t=e.article;a.setState({article:t,isLoading:!1})}).catch(function(e){a.setState({err:e})})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.article,a=e.isLoading,n=e.err;return n?r.a.createElement(_,{err:n}):a?r.a.createElement(x,{text:"Loading article..."}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:ae.a.article},r.a.createElement("p",{className:ae.a.p},r.a.createElement("strong",null,t.topic),r.a.createElement("label",null," posted by "),t.author,r.a.createElement("label",null," created at "),X(t.created_at)),r.a.createElement("h2",{className:ae.a.h2},t.title),r.a.createElement("p",{className:ae.a.p},t.body),r.a.createElement(T,{type:"articles",id:t.article_id,votes:t.votes}),r.a.createElement("p",{className:ae.a.commentarea},t.comment_count,r.a.createElement("button",{className:ae.a.commentbtn,onClick:this.handleClick},"comments")),!0===this.state.showComments&&r.a.createElement(ee,{article_id:this.props.article_id,loggedInUser:this.props.loggedInUser})))}},{key:"componentDidMount",value:function(){this.fetchArticle()}},{key:"componentDidUpdate",value:function(e){e.topic!==this.props.topic&&this.fetchArticle()}}]),t}(n.Component),re=(a(65),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={loggedInUser:"jessjelly"},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.loggedInUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(E,{loggedInUser:this.state.loggedInUser,updateGrandparent:this.updateGrandparent.bind(this)}),r.a.createElement(p.b,null,r.a.createElement(R,{loggedInUser:e,path:"/"}),r.a.createElement(R,{loggedInUser:e,path:"/topics/:topic"}),r.a.createElement(R,{loggedInUser:e,path:"/authors/:author"}),r.a.createElement(ne,{loggedInUser:e,path:"/articles/:article_id"}),r.a.createElement(_,{text:"404: Page Not Found",default:!0}))))}},{key:"updateGrandparent",value:function(e){console.log(e),this.setState({loggedInUser:e}),console.log(this.state.loggedInUser)}}]),t}(n.Component));o.a.render(r.a.createElement(re,null),document.getElementById("root"))},8:function(e,t,a){e.exports={articles:"Articles_articles__3lFy2",header:"Articles_header__q2a4i",list:"Articles_list__2DwpE",listitems:"Articles_listitems__2ZzqY",control:"Articles_control__2T8RS",creation:"Articles_creation__2sVX5",about:"Articles_about__2Cpwq"}},9:function(e,t,a){e.exports={h4:"Comments_h4__1o0s-",h5:"Comments_h5__2nLdm",ul:"Comments_ul__20IpK",deletebtn:"Comments_deletebtn__BmTra",li:"Comments_li__3TNuX"}}},[[35,1,2]]]);
//# sourceMappingURL=main.b20e3d56.chunk.js.map